function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(18, 1);
  y(27)=(1-params(8))*y(30)*y(22)/y(23);
  y(33)=y(26)*params(5);
  residual(1)=(y(35))-(y(56)*(1+y(29))*y(36)*params(1)/y(15)/(1+y(52)));
  T(1)=y(23)^(1-params(8));
  T(2)=(1-y(38))*T(1);
  T(3)=y(3)^params(8);
  residual(2)=(y(22))-(T(2)*T(3));
  residual(3)=(y(40))-(params(7)/2*(y(25)/y(4)-1)^2);
  residual(4)=(y(34)-(steady_state(13)))-(params(14)*(y(11)-(steady_state(11))));
  residual(5)=(y(35))-(y(26)^(-params(2)));
  residual(6)=(params(5)*y(15))-(params(1)/(1+y(52))*y(56)/y(35)*(y(36)*params(5)+1-y(36)));
  residual(7)=(y(24))-((1-y(40))*y(25)+(1-params(6))*y(3));
  residual(8)=(y(32))-((1+y(29))/(1+y(52))*y(11)-y(29)*y(33)+(1+y(29))*(params(16)-y(26)*(params(13)+y(34))-y(23)*y(27)*(y(34)+params(11))-y(28)*(y(34)+params(12))*y(3)));
  residual(9)=(y(15))-(y(37)*(1-y(40)-y(41))+params(1)*y(56)/y(35)*y(58)*y(46)/y(25)*y(62));
  T(4)=params(4)*y(23)^params(3);
  residual(10)=(y(27))-((1+params(13)+y(34))/(1-params(11)-y(34))*T(4)/(y(35)*y(15)));
  residual(11)=(y(37))-(params(1)*y(56)/y(35)*(y(58)*(1-params(6))+y(36)*y(49)*(1-params(12)-y(34))));
  residual(12)=(y(28))-(y(22)*params(8)*y(30)/y(3));
  residual(13)=(y(39)/(1-y(38)))-((1-params(9)/y(30))/(1-params(9))+(1+y(52))/(1+y(29))*y(43)/y(22)*y(51)/y(30)*y(60)/(1-y(59)));
  residual(14)=(y(22))-(y(26)+y(25)+params(16));
  residual(15)=(y(38))-(params(10)/2*y(31)^2);
  residual(16)=(y(39))-(params(10)*y(31)*(1+y(31)));
  residual(17)=(y(41))-(y(25)*params(7)*(y(25)/y(4)-1)/y(4));
  T(5)=exp(y(42));
  residual(18)=((1+y(29))/(1+(steady_state(8))))-(((1+y(31))/(1+(steady_state(10))))^params(17)*T(5));
if nargout > 3
    g1_v = NaN(86, 1);
g1_v(1)=(-(y(56)*(1+y(29))*(-(y(36)*params(1)))/(y(15)*y(15))/(1+y(52))));
g1_v(2)=params(5);
g1_v(3)=1;
g1_v(4)=(-((-(y(35)*(1+params(13)+y(34))/(1-params(11)-y(34))*T(4)))/(y(35)*y(15)*y(35)*y(15))));
g1_v(5)=(-(T(2)*getPowerDeriv(y(3),params(8),1)));
g1_v(6)=(-(1-params(6)));
g1_v(7)=(-((1+y(29))*(-(y(28)*(y(34)+params(12))))));
g1_v(8)=(-((-(y(22)*params(8)*y(30)))/(y(3)*y(3))));
g1_v(9)=(-params(14));
g1_v(10)=(-((1+y(29))/(1+y(52))));
g1_v(11)=(-(params(7)/2*(-y(25))/(y(4)*y(4))*2*(y(25)/y(4)-1)));
g1_v(12)=(-((y(4)*y(25)*params(7)*(-y(25))/(y(4)*y(4))-y(25)*params(7)*(y(25)/y(4)-1))/(y(4)*y(4))));
g1_v(13)=(-(y(56)*y(36)*params(1)/y(15)/(1+y(52))));
g1_v(14)=(-(params(16)-y(26)*(params(13)+y(34))-y(23)*y(27)*(y(34)+params(11))-y(28)*(y(34)+params(12))*y(3)+y(11)*1/(1+y(52))-y(33)));
g1_v(15)=(-(y(60)*y(51)*y(43)*(-(1+y(52)))/((1+y(29))*(1+y(29)))/y(22)/y(30)/(1-y(59))));
g1_v(16)=1/(1+(steady_state(8)));
g1_v(17)=(-(T(3)*(1-y(38))*getPowerDeriv(y(23),1-params(8),1)));
g1_v(18)=(-((1+y(29))*(-(y(27)*(y(34)+params(11))+y(23)*(y(34)+params(11))*(-((1-params(8))*y(30)*y(22)))/(y(23)*y(23))))));
g1_v(19)=(-((1-params(8))*y(30)*y(22)))/(y(23)*y(23))-(1+params(13)+y(34))/(1-params(11)-y(34))*params(4)*getPowerDeriv(y(23),params(3),1)/(y(35)*y(15));
g1_v(20)=1;
g1_v(21)=y(25);
g1_v(22)=y(37);
g1_v(23)=1;
g1_v(24)=(-((1+y(29))*((-y(26))-y(27)*y(23)-y(28)*y(3))));
g1_v(25)=(-(T(4)*(1+params(13)+y(34)+1-params(11)-y(34))/((1-params(11)-y(34))*(1-params(11)-y(34)))/(y(35)*y(15))));
g1_v(26)=(-(params(1)*y(56)/y(35)*y(36)*(-y(49))));
g1_v(27)=(-(getPowerDeriv(y(26),(-params(2)),1)));
g1_v(28)=(-((1+y(29))*(-(params(13)+y(34)))-params(5)*y(29)));
g1_v(29)=(-1);
g1_v(30)=(-(y(56)*(1+y(29))*params(1)/y(15)/(1+y(52))));
g1_v(31)=(-(params(1)/(1+y(52))*y(56)/y(35)*(params(5)-1)));
g1_v(32)=(-(params(1)*y(56)/y(35)*y(49)*(1-params(12)-y(34))));
g1_v(33)=1;
g1_v(34)=1;
g1_v(35)=(-(params(7)/2*2*(y(25)/y(4)-1)*1/y(4)));
g1_v(36)=(-(1-y(40)));
g1_v(37)=(-(y(62)*(-(params(1)*y(56)/y(35)*y(58)*y(46)))/(y(25)*y(25))));
g1_v(38)=(-1);
g1_v(39)=(-((params(7)*(y(25)/y(4)-1)+y(25)*params(7)*1/y(4))/y(4)));
g1_v(40)=1;
g1_v(41)=1;
g1_v(42)=(-((y(36)*params(5)+1-y(36))*(-(params(1)/(1+y(52))*y(56)))/(y(35)*y(35))));
g1_v(43)=(-(y(62)*y(46)*y(58)*(-(params(1)*y(56)))/(y(35)*y(35))/y(25)));
g1_v(44)=(-((-((1+params(13)+y(34))/(1-params(11)-y(34))*T(4)*y(15)))/(y(35)*y(15)*y(35)*y(15))));
g1_v(45)=(-((y(58)*(1-params(6))+y(36)*y(49)*(1-params(12)-y(34)))*(-(params(1)*y(56)))/(y(35)*y(35))));
g1_v(46)=(-(1-y(40)-y(41)));
g1_v(47)=1;
g1_v(48)=(-((1+y(29))*(-((y(34)+params(12))*y(3)))));
g1_v(49)=1;
g1_v(50)=(-((1+y(29))*(-(y(23)*(y(34)+params(11))*(1-params(8))*y(22)/y(23)))));
g1_v(51)=(1-params(8))*y(22)/y(23);
g1_v(52)=(-(params(8)*y(22)/y(3)));
g1_v(53)=(-((-((-params(9))/(y(30)*y(30))))/(1-params(9))+y(60)*(-((1+y(52))/(1+y(29))*y(43)/y(22)*y(51)))/(y(30)*y(30))/(1-y(59))));
g1_v(54)=1;
g1_v(55)=(-((1+y(29))*(-(y(23)*(y(34)+params(11))*(1-params(8))*y(30)/y(23)))));
g1_v(56)=(1-params(8))*y(30)/y(23);
g1_v(57)=(-(params(8)*y(30)/y(3)));
g1_v(58)=(-(y(60)*y(51)*(-((1+y(52))/(1+y(29))*y(43)))/(y(22)*y(22))/y(30)/(1-y(59))));
g1_v(59)=1;
g1_v(60)=(-(T(3)*(-T(1))));
g1_v(61)=y(39)/((1-y(38))*(1-y(38)));
g1_v(62)=1;
g1_v(63)=1/(1-y(38));
g1_v(64)=1;
g1_v(65)=y(37);
g1_v(66)=1;
g1_v(67)=(-(params(10)/2*2*y(31)));
g1_v(68)=(-(params(10)*y(31)+params(10)*(1+y(31))));
g1_v(69)=(-(T(5)*1/(1+(steady_state(10)))*getPowerDeriv((1+y(31))/(1+(steady_state(10))),params(17),1)));
g1_v(70)=(-(y(62)*params(1)*y(56)/y(35)*y(58)/y(25)));
g1_v(71)=(-((1+y(29))*y(36)*params(1)/y(15)/(1+y(52))));
g1_v(72)=(-((y(36)*params(5)+1-y(36))*params(1)/(1+y(52))/y(35)));
g1_v(73)=(-(y(62)*y(46)*y(58)*params(1)/y(35)/y(25)));
g1_v(74)=(-((y(58)*(1-params(6))+y(36)*y(49)*(1-params(12)-y(34)))*params(1)/y(35)));
g1_v(75)=(-(y(62)*params(1)*y(56)/y(35)*y(46)/y(25)));
g1_v(76)=(-(params(1)*y(56)/y(35)*(1-params(6))));
g1_v(77)=(-(params(1)*y(56)/y(35)*y(36)*(1-params(12)-y(34))));
g1_v(78)=(-(y(60)*(1+y(52))/(1+y(29))*y(43)/y(22)/y(30)/(1-y(59))));
g1_v(79)=(-(y(60)*y(51)*(1+y(52))/(1+y(29))/y(22)/y(30)/(1-y(59))));
g1_v(80)=(-((1+y(52))/(1+y(29))*y(43)/y(22)*y(51)/y(30)*y(60)/((1-y(59))*(1-y(59)))));
g1_v(81)=(-((1+y(52))/(1+y(29))*y(43)/y(22)*y(51)/y(30)/(1-y(59))));
g1_v(82)=(-(params(1)*y(56)/y(35)*y(58)*y(46)/y(25)));
g1_v(83)=(-(y(56)*(-((1+y(29))*y(36)*params(1)/y(15)))/((1+y(52))*(1+y(52)))));
g1_v(84)=(-((y(36)*params(5)+1-y(36))*y(56)*(-params(1))/((1+y(52))*(1+y(52)))/y(35)));
g1_v(85)=(-(y(11)*(-(1+y(29)))/((1+y(52))*(1+y(52)))));
g1_v(86)=(-(y(60)*y(51)*y(43)*1/(1+y(29))/y(22)/y(30)/(1-y(59))));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 18, 54);
end
end
